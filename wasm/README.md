# Bstates with WebAssembly (WASM)

This module exports functions implemented in WebAssembly (WASM) to work with `bstates` from a Node.js backend or directly in a browser using JavaScript.

## Build and Test Dependencies

The only dependency required to build and test this package is [nix](https://nixos.org/). Ensure the [flakes](https://nixos.wiki/wiki/Flakes) experimental feature is enabled in your nix installation.

### Installing Nix with Flakes

If you haven't already enabled flakes, you can do so by modifying your nix configuration file:

```bash
mkdir -p ~/.config/nix
echo 'experimental-features = nix-command flakes' >> ~/.config/nix/nix.conf
```

## How to Build and Install Dependencies

To build the project and install all necessary dependencies, simply run:

```bash
npm install
```

This will ensure that the project is built and ready to use.

## How to Test

To execute the test suite:

```bash
npm test
```

## Examples

Before running the examples, make sure to install all dependencies in each example directory. For example:

```bash
cd examples/nodejs_es
npm install
```

All examples use and execute the function implemented in `example.js`.

### Running Examples

#### Node.js ES Module (ESM)

1. Navigate to the `examples/nodejs_es` directory:
   ```bash
   cd examples/nodejs_es
   ```
2. Install dependencies:
   ```bash
   npm install
   ```
3. Run the example:
   ```bash
   npm start
   ```

#### Node.js CommonJS (CJS)

1. Navigate to the `examples/nodejs_cjs` directory:
   ```bash
   cd examples/nodejs_cjs
   ```
2. Install dependencies:
   ```bash
   npm install
   ```
3. Run the example:
   ```bash
   npm start
   ```

#### Web Example

1. Navigate to the `examples/web` directory:
   ```bash
   cd examples/web
   ```
2. Install dependencies:
   ```bash
   npm install
   ```
3. Start the example:
   ```bash
   npm start
   ```
   This will start an HTTP server on port `8080` and open `index.html` in your default web browser.

4. Open the browser's developer console to view the output generated by the function defined in `example.js`.

5. Once loaded, you can interact with the `bstates` API directly from the console.

---

### Additional Notes

- **API Documentation**: For details on how to use the `bstates` API, refer to the inline documentation in the `example.js` file.
- **Troubleshooting**: If you encounter issues, ensure you have both Node.js and npm installed, and that all dependencies have been properly installed.

Feel free to reach out if you encounter any issues or need further assistance!
